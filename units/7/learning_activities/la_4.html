<!DOCTYPE html>
<html>
  <head>
    <title>Create a button that changes the background</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="">
    <link rel="canonical" href="/units/7/learning_activities/la_4">
    <meta charset="utf-8">
    <script src="/javascript/libs/jquery.min.js"></script>
    <script src="//toolness.github.io/p5.js-widget/p5-widget.js"></script>
    <link rel="stylesheet" href="/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="/css/style.css">
</head>

    <body>
      <?php include_once("analyticstracking.php")   ?>
      <div class="container">  
        <div class="row header-row">   
	<div class=" span12">
	  <!-- <div class="menu">
	    	<h1>Introduction to Computational Media with p5.js</h1>
	    	<div class="nav">
	      		<a href="/index.html">INDEX</a>&emsp;
	    	</div>
	  </div> -->
	</div>  
</div>



        <!-- Link back to parent unit -->



<div class="row unit_header">
	<img src="/images/header_image/cs_for_all.png" width="160px" height="auto"/>
	<a href="/units/7/overview"><h3>Unit 4 DOM</a><br/
	<h1>Learning Activity 4</h1>
	<h2>Create a button that changes the background</h2>
	<h3></h3>
</div>
</br>


	<div class="mainrow row">
		<div class="span2">
			<p>Overview</p>
		</div>
		<div class="span6">
			<p><p>This learning activity introduces an important concept in Javascript programming: callback functions. Students create a button and program it to change the background color of their sketch, by binding the mousePressed event of their button to a callback function.</p></p>
		</div>
	</div>




<!--
TEMPORARY CODE TO AUTOMATICALLY LOAD ALL PLACEHOLDER EXAMPLES FOR UNITS 4 to 6
 -->
<!--  -->

<!-- <div class="row">
    <div class="span2">     
        <p>Introduction</p>TODO: add intro
    </div>  
    <div class="span8">
	</div>
</div> -->
<div class="row">
    <div class="span2">     
        <p>Overview</p>
    </div>  
    <div class="span8">
        <h5><!-- 1) Zooming out of your sketch: index.HTML --></h5>
		<p>So far, we have created text-based HTML elements ––headers and paragraphs. But there is much more to HTML than just text. In this learning activity we will create a new kind of element: a button.</p> 
		<p><button>I'm a button. You can click on me. </button></p>
		<p>Once we have a button, we will program the background color of the canvas to change when the user clicks on it.  To do this, we will learn about <i>callback</i> functions: functions that are set to be called when a specific event (like a mouse click) happens.</p> 
		<p>We have made sketches before where we created button behavior <!-- (LA X.X) -->. You might remember this meant we had to detect where the mouse was relative to a rectangle or a circle, which in turn meant writing a series of if statements, and so on (see <a href="../../../units/learning_activity/learning-activity-02-02/">LA 2.2.3 – Is it over a rectangle?</a>) . </p>
		<!-- ideally: embed example 2.2.3-->
		<p>Now, instead of adding code to mousePressed so that a rect or a ellipse on the canvas behave like a button, we are going to use the <a href="https://www.w3schools.com/tags/tag_button.asp">HTML button element</a>.</p>
		<p>The great thing about HTML buttons (and, actually, any HTML element), is that we don't need to detect where the mouse is when the user clicks it: the browser takes care of this for us. When the user clicks on an HTML element, the browser triggers a mousePressed event that's specific to the element that was clicked. And then we can tell the element (in this case, a button) which function should be called when its mousePressed event happens. This function is refered to as a callback function.</p>
		<p>Let's start with a page that has an h1 element, a paragraph element, and a canvas element. We will add the h1 and the paragraph directly to the index.html file, and generate the canvas by calling p5's createCanvas function.</p>
		<img src="../../../images/la/7_4/start.png"/>
		<p>Now let's add an HTML button by calling p5's <a href="https://p5js.org/reference/#/p5/createButton">createButton</a> function. Since we will need a reference to that button later on, let's store the result of createButton in a variable and call it 'button' (lines 1 and 5).</p>
		<img src="../../../images/la/7_4/button.png"/>
		<p>What we want to happen is this: </p><p><i>When the user clicks on the button, change the background color to a random shade of gray.</i></p><p> Let's start by adding a variable to hold the background color (line 2), setting it to a shade of gray in <code>setup</code> (line 6), and use it to set the background in <code>draw</code>(line 10).</p>
		<img src="../../../images/la/7_4/set_bgcolor.png"/>		
		<p>Next let's create a function that does what we want to happen when the user clicks on the button: change the background color. We will name it changeColor: </p>
		<pre><code>function changeColor(){
	bgcolor = random(255);
}
</code></pre>
		<p>Now we need to tell the button that this is the function that should be called when the browser triggers its mousePressed event. Here is the line of code that does that: <code>button.mousePressed(changeColor);</code></p><p>In other words, the line above <i>binds</i> an event that happens on our page (the mouse was pressed) to the code that holds the instructions of what to do when it does (the code in the changeColor function).</p>
		<p><code>changeColor</code>is our callback function: it is 'called back' whenever the mousePressed event happens. <!-- When we set a callback, we are saying: whenever this certain thing happens in the future (in this case, when the mouse is pressed), call this function (changeColor). --></p>

		<p>Here is the complete code: </p>

		<pre><code>var button;
var bgcolor;

function setup() { 
  createCanvas(200, 200);
	bgcolor = random(255);
	button = createButton("change background");
	button.mousePressed(changeColor);
} 

function draw() { 
	background(bgcolor);
}

function changeColor(){
	bgcolor = random(255);
}
</code></pre>

<p>Today we used a callback in a relatively simple context: creating an HTML button and making something happen on the canvas when the user clicks that button. But the concept of binding a particular set of code (the code in changeColor) to a particular action on the page (clicking on a button), is one that is crucial to Javascript programming.</p>

<p>Exercise: change this example so that the background is changed to a random color, rather than a random shade of gray.</p>

<p>Exercise: pick one of your sketches and add two HTML buttons to it. Clicking on each button should change something different on your canvas drawing ––maybe the position of an element changes, or its color.</p>

<!-- Ideally:
 be more specific: make it more interesting
make a more interesting example, and write prompt
add a button that changes the size of a circle
    - add a button that changes the speed at which h1 is moving
 -->


		<!-- Now let's write a mousePressed function and, inside it, change the value of the bgcolor variable to a random value:

		screenshot:
		function mousePressed(){
			bgcolor = random(255);
		}

		Try this –––it works! When you click on the button, the background of the canvas changes. But try clicking somewhere else on the page: the background changes whenever the mouse is clicked <i>anywhere</i>. <code>mousePressed</code> is a global function: it is triggered when the user clicks anywhere on the page. 

		What we want to do is to somehow attach the mousePressed function to the button, so that the code in it is only executed when the user clicks on the button (and not anywhere else on the page).  

		Before we do this, let's do a small change in our current code. Let's write a function called changeColor, put the <code>bgcolor = random(255)</code> line in it. Then, in mousePressed(), we call that function. This does exactly the same as the code we had before: when we click the mouse, mousePressed is triggered, which calls changeColor, which picks a new color and changes the background to that new color. Try it. 

		What we want to do is take this changeColor function and attach it to the mousePressed event for our button. 

		Instead of writing a generic, global mousePressed function, we are going to call mousePressed on the button itself: 

		button.mousePressed(changeColor);

		This line of code means when the mouse is pressed on the button, call the function inside the parentheses (in this case, changeColor). The function inside the parenthesis is named a "callback function": when the mousePressed event happens, it 'calls back' the specified function.

		When we use HTML elements, responding to user clicks is much easier. The browser detects when the user clicks on a button, and the p5.js library manages that event for us. This means that we have to write much lesser code in order to have something happen when the user clicks on an HTML button.

		Now we want to make something happen on the canvas when I click the mouse. We know from prev LA's that if we write a function called mousePressed, it will execute whenever the mouse is clicked ––anywhere on the page. 

		First, let's make the background of the sketch change when the user clicks anywhere on the screen. 
		We have done this in LA X.X, using the global mousePressed function. The mousePressed function is called whenever the user clicks *anywhere* on the page. Try it: 
		  -->

		<p>




		 

		<!-- This is basically the building block behind how just about everything in javascript works -->

<!-- 		So in this LA, even though we are working within this small context 
		––I want to add a button to this page, when I click that button I want the background of the canvas to change: 

		the way we will make that happen is an important building block for anything you might want to do with Javascript programming in the future. 

		---note that this only works if you include the p5.dom.js library. that the dom library is what adds a mousePressed event for every single DOM element (p, h1, any other) -->

    </div> 
</div> 









<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.3/ace.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript">
	var editor;
	var folder = "../../../code/unit_7/la_4/";

    $(document).ready(function() {

    	$('.editor').each(function( index ) {
    		var i = index + 1;
    		var path = folder + 'ex_' + i;
    		var code =  path + '/sketch.js'
    		$("#" + this.id).load(code, function(){
    			$('#canvas_iframe_' + i).attr("src", path + '/index.html');

    			editor = ace.edit(this);
			  	editor.setTheme("ace/theme/monokai");
			  	editor.getSession().setMode('ace/mode/csharp');
			  	editor.setOption("maxLines", 1000);
			  	var editor_div = document.getElementById('editor');
    			editor_div.style.height = editor.getSession().getDocument().getLength() *
					editor.renderer.lineHeight + 'px';
    			editor.resize();

    			/* For Reference:
    				editor.getSession().getDocument().getLength() *
					editor.renderer.lineHeight + editor.renderer.scrollBar.getWidth()
				*/

			  });
		});
    });
</script>

        <script src="/bootstrap/js/bootstrap.min.js"></script>  

      </div>
    </body>
</html>